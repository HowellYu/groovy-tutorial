<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>30. String Operators</title>
<link href="stylesheet.css" type="text/css" rel="stylesheet" />
</head>
<body>
<div id="leanpub-toc">
<h2></h2>
<ol class="toc has-parts">
<ul class='toc has-parts'>
  <li>
    <ul>
      <li>
        <a href='chap00.html#leanpub-auto-introduction'>Introduction</a>
      </li>
      <li>
        <a href='chap01.html#leanpub-auto-legal-notices'>Legal Notices</a>
      </li>
    </ul>
  </li>
  <li>
    <a href='chap02.html#leanpub-auto-getting-started'><span class="section-number">I </span>Getting started</a>
    <ul>
      <li>
        <a href='chap03.html#leanpub-auto-installing-groovy'><span class="section-number">1. </span>Installing Groovy</a>
      </li>
      <li>
        <a href='chap04.html#leanpub-auto-your-first-lines-of-groovy'><span class="section-number">2. </span>Your first lines of Groovy</a>
      </li>
      <li>
        <a href='chap05.html#leanpub-auto-comments'><span class="section-number">3. </span>Comments</a>
      </li>
      <li>
        <a href='chap06.html#leanpub-auto-statements'><span class="section-number">4. </span>Statements</a>
      </li>
      <li>
        <a href='chap07.html#leanpub-auto-the-assert-statement'><span class="section-number">5. </span>The <code>assert</code> statement</a>
      </li>
      <li>
        <a href='chap08.html#leanpub-auto-reserved-words'><span class="section-number">6. </span>Reserved Words</a>
      </li>
      <li>
        <a href='chap09.html#leanpub-auto-packages'><span class="section-number">7. </span>Packages</a>
      </li>
    </ul>
  </li>
  <li>
    <a href='chap10.html#leanpub-auto-variables'><span class="section-number">II </span>Variables</a>
    <ul>
      <li>
        <a href='chap11.html#leanpub-auto-declaring-variables'><span class="section-number">8. </span>Declaring Variables</a>
      </li>
      <li>
        <a href='chap12.html#leanpub-auto-data-types'><span class="section-number">9. </span>Data Types</a>
      </li>
      <li>
        <a href='chap13.html#leanpub-auto-objects'><span class="section-number">10. </span>Objects</a>
      </li>
      <li>
        <a href='chap14.html#leanpub-auto-booleans'><span class="section-number">11. </span>Booleans</a>
      </li>
      <li>
        <a href='chap15.html#leanpub-auto-numbers'><span class="section-number">12. </span>Numbers</a>
      </li>
      <li>
        <a href='chap16.html#leanpub-auto-strings'><span class="section-number">13. </span>Strings</a>
      </li>
      <li>
        <a href='chap17.html#leanpub-auto-collections'><span class="section-number">14. </span>Collections</a>
      </li>
      <li>
        <a href='chap18.html#leanpub-auto-arrays'><span class="section-number">15. </span>Arrays</a>
      </li>
      <li>
        <a href='chap19.html#leanpub-auto-ranges'><span class="section-number">16. </span>Ranges</a>
      </li>
      <li>
        <a href='chap20.html#leanpub-auto-regular-expressions'><span class="section-number">17. </span>Regular Expressions</a>
      </li>
      <li>
        <a href='chap21.html#leanpub-auto-data-types-1'><span class="section-number">18. </span>Data types</a>
      </li>
    </ul>
  </li>
  <li>
    <a href='chap22.html#leanpub-auto-operators'><span class="section-number">III </span>Operators</a>
    <ul>
      <li>
        <a href='chap23.html#leanpub-auto-operators-1'><span class="section-number">19. </span>Operators</a>
      </li>
      <li>
        <a href='chap24.html#leanpub-auto-numeric-operators'><span class="section-number">20. </span>Numeric Operators</a>
      </li>
      <li>
        <a href='chap25.html#leanpub-auto-simple-assignment-operator'><span class="section-number">21. </span>Simple Assignment Operator</a>
      </li>
      <li>
        <a href='chap26.html#leanpub-auto-the-complement-operator'><span class="section-number">22. </span>The Complement Operator</a>
      </li>
      <li>
        <a href='chap27.html#leanpub-auto-equality-operators'><span class="section-number">23. </span>Equality Operators</a>
      </li>
      <li>
        <a href='chap28.html#leanpub-auto-arithmetic-operators'><span class="section-number">24. </span>Arithmetic operators</a>
      </li>
      <li>
        <a href='chap29.html#leanpub-auto-relational-operators'><span class="section-number">25. </span>Relational Operators</a>
      </li>
      <li>
        <a href='chap30.html#leanpub-auto-increment-and-decrement-operators'><span class="section-number">26. </span>Increment and Decrement Operators</a>
      </li>
      <li>
        <a href='chap31.html#leanpub-auto-conditional-operators'><span class="section-number">27. </span>Conditional Operators</a>
      </li>
      <li>
        <a href='chap32.html#leanpub-auto-bitwise-operators'><span class="section-number">28. </span>Bitwise Operators</a>
      </li>
      <li>
        <a href='chap33.html#leanpub-auto-compound-assignment-operators'><span class="section-number">29. </span>Compound Assignment Operators</a>
      </li>
      <li>
        <a href='chap34.html#leanpub-auto-string-operators-1'><span class="section-number">30. </span>String Operators</a>
      </li>
      <li>
        <a href='chap35.html#leanpub-auto-regular-expression-operators-1'><span class="section-number">31. </span>Regular Expression Operators</a>
      </li>
      <li>
        <a href='chap36.html#leanpub-auto-collection-operators-1'><span class="section-number">32. </span>Collection operators</a>
      </li>
      <li>
        <a href='chap37.html#leanpub-auto-object-operators-1'><span class="section-number">33. </span>Object Operators</a>
      </li>
    </ul>
  </li>
  <li>
    <a href='chap38.html#leanpub-auto-control-flow-statements'><span class="section-number">IV </span>Control Flow Statements</a>
    <ul>
      <li>
        <a href='chap39.html#leanpub-auto-introduction-1'><span class="section-number">34. </span>Introduction</a>
      </li>
      <li>
        <a href='chap40.html#leanpub-auto-blocks'><span class="section-number">35. </span>Blocks</a>
      </li>
      <li>
        <a href='chap41.html#leanpub-auto-the-if-statement'><span class="section-number">36. </span>The <code>if</code> Statement</a>
      </li>
      <li>
        <a href='chap42.html#leanpub-auto-the-switch-statement'><span class="section-number">37. </span>The <code>switch</code> Statement</a>
      </li>
      <li>
        <a href='chap43.html#leanpub-auto-the-for-loop'><span class="section-number">38. </span>The <code>for</code> Loop</a>
      </li>
      <li>
        <a href='chap44.html#leanpub-auto-the-while-loop'><span class="section-number">39. </span>The <code>while</code> loop</a>
      </li>
      <li>
        <a href='chap45.html#leanpub-auto-branching-statements'><span class="section-number">40. </span>Branching statements</a>
      </li>
    </ul>
  </li>
  <li>
    <a href='chap46.html#leanpub-auto-exceptions'><span class="section-number">V </span>Exceptions</a>
    <ul>
      <li>
        <a href='chap47.html#leanpub-auto-the-throwable-family'><span class="section-number">41. </span>The Throwable Family</a>
      </li>
      <li>
        <a href='chap48.html#leanpub-auto-common-exceptions'><span class="section-number">42. </span>Common Exceptions</a>
      </li>
      <li>
        <a href='chap49.html#leanpub-auto-anatomy-of-an-exception'><span class="section-number">43. </span>Anatomy of an Exception</a>
      </li>
      <li>
        <a href='chap50.html#leanpub-auto-try-catch-finally'><span class="section-number">44. </span>Try-Catch-Finally</a>
      </li>
      <li>
        <a href='chap51.html#leanpub-auto-how-much-should-we-try'><span class="section-number">45. </span>How Much Should We try?</a>
      </li>
      <li>
        <a href='chap52.html#leanpub-auto-causing-an-exception'><span class="section-number">46. </span>Causing an Exception</a>
      </li>
      <li>
        <a href='chap53.html#leanpub-auto-catching-errors'><span class="section-number">47. </span>Catching Errors</a>
      </li>
      <li>
        <a href='chap54.html#leanpub-auto-methods-and-exceptions'><span class="section-number">48. </span>Methods and Exceptions</a>
      </li>
    </ul>
  </li>
  <li>
    <a href='chap55.html#leanpub-auto-methods'><span class="section-number">VI </span>Methods</a>
    <ul>
      <li>
        <a href='chap56.html#leanpub-auto-the-basics'><span class="section-number">49. </span>The Basics</a>
      </li>
      <li>
        <a href='chap57.html#leanpub-auto-parameters'><span class="section-number">50. </span>Parameters</a>
      </li>
      <li>
        <a href='chap58.html#leanpub-auto-default-values-for-parameters'><span class="section-number">51. </span>Default Values for Parameters</a>
      </li>
      <li>
        <a href='chap59.html#leanpub-auto-named-arguments'><span class="section-number">52. </span>Named Arguments</a>
      </li>
      <li>
        <a href='chap60.html#leanpub-auto-variable-arguments-varargs'><span class="section-number">53. </span>Variable Arguments (Varargs)</a>
      </li>
      <li>
        <a href='chap61.html#leanpub-auto-return-value'><span class="section-number">54. </span>Return value</a>
      </li>
      <li>
        <a href='chap62.html#leanpub-auto-throwing-an-exception'><span class="section-number">55. </span>Throwing an exception</a>
      </li>
      <li>
        <a href='chap63.html#leanpub-auto-documenting-a-method'><span class="section-number">56. </span>Documenting a method</a>
      </li>
      <li>
        <a href='chap64.html#leanpub-auto-techniques'><span class="section-number">57. </span>Techniques</a>
      </li>
    </ul>
  </li>
  <li>
    <a href='chap65.html#leanpub-auto-closures'><span class="section-number">VII </span>Closures</a>
    <ul>
      <li>
        <a href='chap66.html#leanpub-auto-introducing-closures'><span class="section-number">58. </span>Introducing Closures</a>
      </li>
      <li>
        <a href='chap67.html#leanpub-auto-parameters-1'><span class="section-number">59. </span>Parameters</a>
      </li>
      <li>
        <a href='chap68.html#leanpub-auto-returning-values'><span class="section-number">60. </span>Returning Values</a>
      </li>
      <li>
        <a href='chap69.html#leanpub-auto-closures-as-method-parameters'><span class="section-number">61. </span>Closures as Method Parameters</a>
      </li>
      <li>
        <a href='chap70.html#leanpub-auto-loops-and-closures'><span class="section-number">62. </span>Loops and closures</a>
      </li>
      <li>
        <a href='chap71.html#leanpub-auto-useful-methods-that-use-closures'><span class="section-number">63. </span>Useful Methods That Use Closures</a>
      </li>
      <li>
        <a href='chap72.html#leanpub-auto-closure-scope'><span class="section-number">64. </span>Closure scope</a>
      </li>
    </ul>
  </li>
  <li>
    <a href='chap73.html#leanpub-auto-object-oriented-programming'><span class="section-number">VIII </span>Object-oriented programming</a>
    <ul>
      <li>
        <a href='chap74.html#leanpub-auto-expando'><span class="section-number">65. </span>Expando</a>
      </li>
      <li>
        <a href='chap75.html#leanpub-auto-the-basics-of-oo'><span class="section-number">66. </span>The basics of OO</a>
      </li>
      <li>
        <a href='chap76.html#leanpub-auto-colophon'>Colophon</a>
      </li>
    </ul>
  </li>
</ul>

</ol>
</div>
<div id="leanpub-main">
<h2 id="leanpub-auto-string-operators-1"><span class="section-number">30. </span>String Operators</h2>

<table class="information sidebarish">
  <tbody>
    <tr><td class="sidebar-icon">
      <img class="sidebar-image" src="images/leanpub_info-circle.png" alt="information" width="50px" /></td>
    <td>
      <p>Groovy provides a very handy set of operators for working with Strings.</p>

    </td>
  </tr>
  </tbody>
</table><p>You’ll spend a lot of your career manipulating strings so anything that makes them less of a hassle is nice. Groovy helps you with the following operators overloaded for your string work.</p>


<p class="table-title">String operators</p>

<table>
  <thead>
    <tr><th style="text-align: center">Operator(s)</th>
      <th style="text-align: left">Type</th>
    </tr>
  </thead>
  <tbody>
    <tr><td style="text-align: center"><code>+</code>, <code>&lt;&lt;</code></td>
      <td style="text-align: left">Concatenate Operator</td>
    </tr>
    <tr><td style="text-align: center"><code>&lt;&lt;=</code> <code>+=</code></td>
      <td style="text-align: left">Append Operator</td>
    </tr>
    <tr><td style="text-align: center"><code>-</code></td>
      <td style="text-align: left">Remove Operator</td>
    </tr>
    <tr><td style="text-align: center"><code>-=</code></td>
      <td style="text-align: left">Remove In-place Operator</td>
    </tr>
    <tr><td style="text-align: center"><code>*</code></td>
      <td style="text-align: left">Repeat Operator</td>
    </tr>
    <tr><td style="text-align: center"><code>*=</code></td>
      <td style="text-align: left">Repeat In-place Operator</td>
    </tr>
    <tr><td style="text-align: center"><code>++</code> <code>--</code></td>
      <td style="text-align: left">Increment and Decrement Operators</td>
    </tr>
  </tbody>
</table><h3 id="leanpub-auto-concatenate-operator">Concatenate Operator</h3>

<p>The concatenate operator joins two strings together:</p>

<div class="code-block">
<div class="highlight"><pre><code class="n">println</code>  <code class="err">'</code><code class="n">It</code> <code class="n">was</code> <code class="n">the</code> <code class="n">best</code> <code class="n">of</code> <code class="n">times</code><code class="p">.</code><code class="err">'</code> <code class="o">&lt;&lt;</code> <code class="err">'</code><code class="n">It</code> <code class="n">was</code> <code class="n">the</code> <code class="n">worst</code> <code class="n">of</code> <code class="n">times</code><code class="p">.</code><code class="err">'</code>
</pre></div>

</div>

<p>The above example is rather daft as we could have just put both strings together in the same set of quotes. You’re more likely to see strings added to over the course of a program:</p>

<div class="code-block">
<div class="highlight"><pre><code class="n">def</code> <code class="n">quote</code> <code class="o">=</code> <code class="err">'</code><code class="n">It</code> <code class="n">was</code> <code class="n">the</code> <code class="n">best</code> <code class="n">of</code> <code class="n">times</code><code class="p">.</code><code class="err">'</code>
<code class="n">quote</code> <code class="o">=</code> <code class="n">quote</code> <code class="o">&lt;&lt;</code> <code class="err">'</code><code class="n">It</code> <code class="n">was</code> <code class="n">the</code> <code class="n">worst</code> <code class="n">of</code> <code class="n">times</code><code class="p">.</code><code class="err">'</code>
<code class="n">println</code> <code class="n">quote</code>
</pre></div>

</div>

<p>Instead of using the concatenate you could have just used string interpolation:</p>

<div class="code-block">
<div class="highlight"><pre><code class="n">def</code> <code class="n">quote</code> <code class="o">=</code> <code class="err">'</code><code class="n">It</code> <code class="n">was</code> <code class="n">the</code> <code class="n">best</code> <code class="n">of</code> <code class="n">times</code><code class="p">.</code><code class="err">'</code>
<code class="n">quote</code> <code class="o">=</code> <code class="s">"$quote It was the worst of times."</code>
<code class="n">println</code> <code class="n">quote</code>
</pre></div>

</div>

<p>The <code>+</code> operator is used in the same manner as <code>&lt;&lt;</code>:</p>

<div class="code-block">
<div class="highlight"><pre><code class="n">def</code> <code class="n">quote</code> <code class="o">=</code> <code class="err">'</code><code class="n">It</code> <code class="n">was</code> <code class="n">the</code> <code class="n">best</code> <code class="n">of</code> <code class="n">times</code><code class="p">.</code><code class="err">'</code>
<code class="n">quote</code> <code class="o">=</code> <code class="n">quote</code> <code class="o">+</code> <code class="err">'</code><code class="n">It</code> <code class="n">was</code> <code class="n">the</code> <code class="n">worst</code> <code class="n">of</code> <code class="n">times</code><code class="p">.</code><code class="err">'</code>
<code class="n">println</code> <code class="n">quote</code>
</pre></div>

</div>

<p>As you’ll see in later in this chapter it’s best to use <code>&lt;&lt;</code> over <code>+</code></p>

<h4 id="leanpub-auto-concatenation-and-types">Concatenation and Types</h4>

<p>When you concatenate a string with a number Groovy will cast the number into a string. That means you can end up with 1 + 1 = 11 as the code below demonstrates:</p>

<div class="code-block">
<div class="highlight"><pre><code class="n">assert</code> <code class="sc">'1'</code> <code class="o">+</code> <code class="mi">1</code> <code class="o">==</code> <code class="err">'</code><code class="mi">11</code><code class="err">'</code>
<code class="n">assert</code> <code class="mi">1</code> <code class="o">+</code> <code class="sc">'1'</code> <code class="o">==</code> <code class="err">'</code><code class="mi">11</code><code class="err">'</code>
</pre></div>

</div>

<p>If you’re really wanting to add a string to a number you need to make sure you explicitly turn the string into a number:</p>

<div class="code-block">
<div class="highlight"><pre><code class="n">assert</code> <code class="sc">'1'</code><code class="p">.</code><code class="n">toInteger</code><code class="p">()</code> <code class="o">+</code> <code class="mi">1</code> <code class="o">==</code> <code class="mi">2</code>
</pre></div>

</div>

<p>This may all sound a bit odd now but if you’re trying to work out why your program’s maths seems all wrong it’s worth looking into where strings and numbers are being mashed together.</p>

<h3 id="leanpub-auto-append-operator">Append Operator</h3>

<p>The append operator (<code>&lt;&lt;=</code>) conflates the assignment (<code>=</code>) and concatenate operators:</p>

<div class="code-block">
<div class="highlight"><pre><code class="n">def</code> <code class="n">quote</code> <code class="o">=</code> <code class="err">'</code><code class="n">It</code> <code class="n">was</code> <code class="n">the</code> <code class="n">best</code> <code class="n">of</code> <code class="n">times</code><code class="p">.</code><code class="err">'</code>
<code class="n">quote</code> <code class="o">&lt;&lt;=</code> <code class="err">'</code><code class="n">It</code> <code class="n">was</code> <code class="n">the</code> <code class="n">worst</code> <code class="n">of</code> <code class="n">times</code><code class="p">.</code><code class="err">'</code>
<code class="n">println</code> <code class="n">quote</code>
</pre></div>

</div>

<p>This saves you from having to use <code>quote = quote &lt;&lt; 'It was the worst of times.'</code></p>

<table class="warning sidebarish">
  <tbody>
    <tr><td class="sidebar-icon">
      <img class="sidebar-image" src="images/leanpub_warning.png" alt="warning" width="50px" /></td>
    <td>
      <p><code>+=</code> also appends but don’t use it - you’ll see why in a moment.</p>

    </td>
  </tr>
  </tbody>
</table><h3 id="leanpub-auto-remove-operator">Remove Operator</h3>

<p>The remove operator (<code>-</code>) removes the first instance of a string or regular expression from another string. The easiest form just removes the first instance of a specific string - in the case of the example below, ‘of ‘ is removed:</p>

<div class="code-block">
<div class="highlight"><pre><code class="n">quote</code> <code class="o">=</code> <code class="err">'</code><code class="n">It</code> <code class="n">was</code> <code class="n">the</code> <code class="n">worst</code> <code class="n">of</code> <code class="n">times</code><code class="p">.</code><code class="err">'</code> <code class="o">-</code> <code class="err">'</code><code class="n">of</code> <code class="err">'</code>
<code class="n">println</code> <code class="n">quote</code>
</pre></div>

</div>

<p>The example above will display <code>It was the worst times.</code></p>

<p>A regular expression pattern can also be used if you want to use a pattern. In the example below, the first occurrence of “bat” or “rat” is removed, resulting in <code>cat  rat monkey</code> (<em>note the double space</em>)</p>

<div class="code-block">
<div class="highlight"><pre><code class="n">println</code> <code class="err">'</code><code class="n">cat</code> <code class="n">bat</code> <code class="n">rat</code> <code class="n">monkey</code><code class="err">'</code> <code class="o">-</code> <code class="o">~/</code><code class="p">[</code><code class="n">br</code><code class="p">]</code><code class="n">at</code><code class="o">/</code>
</pre></div>

</div>

<h3 id="leanpub-auto-remove-in-place-operator">Remove In-Place Operator</h3>

<p>Works just like the remove operator (<code>-</code>) but does the match to the variable as well as modifying it. As for the first remove example, a string can be provided for removal:</p>

<div class="code-block">
<div class="highlight"><pre><code class="n">quote</code> <code class="o">=</code> <code class="err">'</code><code class="n">It</code> <code class="n">was</code> <code class="n">the</code> <code class="n">worst</code> <code class="n">of</code> <code class="n">times</code><code class="p">.</code><code class="err">'</code>
<code class="n">quote</code> <code class="o">-=</code> <code class="err">'</code><code class="n">of</code> <code class="err">'</code>
<code class="n">println</code> <code class="n">quote</code>
</pre></div>

</div>

<p>…and it can also use patterns: </p>

<div class="code-block">
<div class="highlight"><pre><code class="n">def</code> <code class="n">str</code> <code class="o">=</code> <code class="err">'</code><code class="n">cat</code> <code class="n">bat</code> <code class="n">rat</code> <code class="n">monkey</code><code class="err">'</code>
<code class="n">str</code> <code class="o">-=</code> <code class="o">~/</code><code class="p">[</code><code class="n">br</code><code class="p">]</code><code class="n">at</code><code class="o">/</code>
<code class="n">println</code> <code class="n">str</code>
</pre></div>

</div>

<h3 id="leanpub-auto-repeat-operator">Repeat Operator</h3>

<p>This is a great operator for those that love repetition! Let’s print out <code>hello</code> ten-times, each time one a new line:</p>

<div class="code-block">
<div class="highlight"><pre><code class="n">print</code> <code class="err">'</code><code class="n">hello</code><code class="err">\</code><code class="n">n</code><code class="err">'</code> <code class="o">*</code> <code class="mi">10</code>
</pre></div>

</div>

<h3 id="leanpub-auto-repeat-in-placeoperator">Repeat In-PlaceOperator</h3>

<p>This one applies the multiplier against the variable and stores the result back in the variable:</p>

<div class="code-block">
<div class="highlight"><pre><code class="n">def</code> <code class="n">complaint</code> <code class="o">=</code> <code class="err">'</code><code class="n">ow</code><code class="err">'</code>
<code class="n">complaint</code> <code class="o">*=</code> <code class="mi">10</code>
<code class="n">println</code> <code class="n">complaint</code>
</pre></div>

</div>

<p>I’ll leave it to you to see what happens :)</p>

<h3 id="leanpub-auto-increment-and-decrement-operators-1">Increment and Decrement Operators</h3>

<p>The increment operator will move the last character of the string to its next value:</p>

<div class="code-block">
<div class="highlight"><pre><code class="n">def</code> <code class="n">str</code> <code class="o">=</code> <code class="err">'</code><code class="n">hello</code><code class="err">'</code>
<code class="n">str</code><code class="o">++</code>
<code class="n">assert</code> <code class="n">str</code> <code class="o">==</code> <code class="err">'</code><code class="n">hellp</code><code class="err">'</code>
</pre></div>

</div>

<p>The increment/decrement actually works across the Unicode character codes<sup id="fnref-unicode"><a href="chap34.html#fn-unicode" rel="footnote">1</a></sup> so don’t expect code to just use ‘a’ to ‘z’:</p>

<div class="code-block">
<div class="highlight"><pre><code class="n">def</code> <code class="n">str</code> <code class="o">=</code> <code class="err">'</code><code class="n">fo</code><code class="o">%</code><code class="err">'</code>
<code class="n">str</code><code class="o">--</code>
<code class="n">assert</code> <code class="n">str</code> <code class="o">==</code> <code class="err">'</code><code class="n">fo</code><code class="err">$'</code>
</pre></div>

</div>

<p>For a small experiment, try the following code - it will display a subset of the Unicode characters:</p>

<div class="code-block">
<div class="highlight"><pre><code class="c1">//\u00A1 is the Unicode character for an inverted exclamation mark</code>
<code class="n">def</code> <code class="n">chr</code> <code class="o">=</code> <code class="p">'</code><code class="err">\</code><code class="n">u00A1</code><code class="p">'</code>
<code class="k">for</code> <code class="p">(</code><code class="n">i</code> <code class="n">in</code> <code class="mf">161..191</code><code class="p">)</code> <code class="p">{</code>
    <code class="n">println</code> <code class="n">chr</code>
    <code class="n">chr</code><code class="o">++</code>
<code class="p">}</code>
</pre></div>

</div>

<p>I’m sure that this is useful somewhere…..</p>

<h3 id="leanpub-auto-warning-strings-are-expensive">Warning: Strings Are Expensive!</h3>

<p>Many programs build strings up over the course of their operation. This can start becoming very expensive in terms of program resources such as memory because, without the correct approach, the JVM has to copy strings to new memory locations each time you use concatenation.</p>

<p>Java developers turn to the <code>StringBuilder</code> and <code>StringBuffer</code> classes to make their string building more efficient. Groovy developers using dynamic types can use a few tricks to stay dynamic and ensure efficiency.</p>

<p>Let’s take a look at two approaches to building a string. In the first example I’ll use the <code>+=</code> operator and perform 1000 concatenations:</p>

<div class="code-block">
  <p class="codeblock-title">Timing the <code>+=</code> concatenation</p>

  <hr /><div class="highlight"><pre><code class="kn">import</code> <code class="nn">java.text.DecimalFormat</code>

<code class="k">def</code> <code class="nf">quote</code> <code class="o">=</code> <code class="s">'It was the best of times. It was the worst of times.</code><code class="se">\n</code><code class="s">'</code>

<code class="k">def</code> <code class="nf">str</code> <code class="o">=</code> <code class="s">""</code>

<code class="k">def</code> <code class="nf">startTime</code> <code class="o">=</code> <code class="n">System</code><code class="o">.</code><code class="n">nanoTime</code><code class="p">()</code>
<code class="mf">1000.</code><code class="n">times</code> <code class="p">{</code>
    <code class="nb">str</code> <code class="o">+=</code> <code class="n">quote</code>
<code class="p">}</code>
<code class="k">def</code> <code class="nf">endTime</code> <code class="o">=</code> <code class="n">System</code><code class="o">.</code><code class="n">nanoTime</code><code class="p">()</code>

<code class="n">DecimalFormat</code> <code class="n">formatter</code> <code class="o">=</code> <code class="n">new</code> <code class="n">DecimalFormat</code><code class="p">(</code><code class="s">"#,###"</code><code class="p">)</code>
<code class="k">def</code> <code class="nf">duration</code> <code class="o">=</code> <code class="n">formatter</code><code class="o">.</code><code class="n">format</code><code class="p">(</code><code class="n">endTime</code> <code class="o">-</code> <code class="n">startTime</code><code class="p">)</code>

<code class="n">println</code> <code class="s">"That took $duration nano seconds"</code>
</pre></div>

  <hr /></div>

<table class="warning sidebarish">
  <tbody>
    <tr><td class="sidebar-icon">
      <img class="sidebar-image" src="images/leanpub_warning.png" alt="warning" width="50px" /></td>
    <td>
      <h3 id="leanpub-auto-timing-issues">Timing issues</h3>
  <p>Timing in this manner isn’t perfect as you won’t get the same answer each time you run the script. However, you should notice a significant different between the two examples - enough to indicate that the second version is much more efficient.</p>

    </td>
  </tr>
  </tbody>
</table><p>In the next example I’ll change just 1 thing: I’ll use the <code>&lt;&lt;=</code> operator rather than <code>+=</code>:</p>

<div class="code-block">
  <p class="codeblock-title">Timing the <code>&lt;&lt;=</code> concatenation</p>

  <hr /><div class="highlight"><pre><code class="kn">import</code> <code class="nn">java.text.DecimalFormat</code>

<code class="k">def</code> <code class="nf">quote</code> <code class="o">=</code> <code class="s">'It was the best of times. It was the worst of times.</code><code class="se">\n</code><code class="s">'</code>

<code class="k">def</code> <code class="nf">str</code> <code class="o">=</code> <code class="s">""</code>

<code class="k">def</code> <code class="nf">startTime</code> <code class="o">=</code> <code class="n">System</code><code class="o">.</code><code class="n">nanoTime</code><code class="p">()</code>
<code class="mf">1000.</code><code class="n">times</code> <code class="p">{</code>
    <code class="nb">str</code> <code class="o">&lt;&lt;=</code> <code class="n">quote</code>
<code class="p">}</code>
<code class="k">def</code> <code class="nf">endTime</code> <code class="o">=</code> <code class="n">System</code><code class="o">.</code><code class="n">nanoTime</code><code class="p">()</code>

<code class="n">DecimalFormat</code> <code class="n">formatter</code> <code class="o">=</code> <code class="n">new</code> <code class="n">DecimalFormat</code><code class="p">(</code><code class="s">"#,###"</code><code class="p">)</code>
<code class="k">def</code> <code class="nf">duration</code> <code class="o">=</code> <code class="n">formatter</code><code class="o">.</code><code class="n">format</code><code class="p">(</code><code class="n">endTime</code> <code class="o">-</code> <code class="n">startTime</code><code class="p">)</code>

<code class="n">println</code> <code class="s">"That took $duration nano seconds"</code>
</pre></div>

  <hr /></div>

<p>When I run these scripts in groovyConsole I can see that the results are very different. When I ran each test 100 times and averaged the result I got:</p>

<ul><li>Example 1 (using <code>+=</code>): 24,215,520 ns</li>
  <li>Example 2 (using <code>&lt;&lt;=</code>): 191,490 ns</li>
</ul><p>To me this is evidence enough for me to use ‘&lt;&lt;=’ over <code>+=</code>!</p>

<h3 id="leanpub-auto-templates">Templates</h3>

<p>If you find yourself building strings around boilerplate text - such as a form letter - consider using Groovy’s templating system. We’ll look at templates in their own tutorial.</p>

<div class="footnotes">
  <ol><li id="fn-unicode">See the <a href="http://www.unicode.org/charts/">Unicode Character Code Charts</a><a href="chap34.html#fnref-unicode" rev="footnote">↩</a></li>
  </ol></div>
</div>
</body>
</html>
